<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>The Fun Fact Rolodex - Rithika's Website</title>
    <link rel="stylesheet" href="/style.css">
    <style>
        .rolodex-container {
            max-width: 900px;
            margin: 0 auto;
            padding: 2rem 1rem;
            color: white;
        }

        .rolodex-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .rolodex-header h1 {
            font-size: 2.5rem;
            margin-bottom: 2rem;
            font-weight: 600;
        }

        .quote-section {
            background: rgba(255, 255, 255, 0.05);
            border-left: 4px solid rgba(255, 255, 255, 0.3);
            padding: 1.5rem;
            margin-bottom: 2rem;
            border-radius: 8px;
        }

        .quote-section p {
            font-style: italic;
            line-height: 1.7;
            margin-bottom: 0.5rem;
        }

        .quote-attribution {
            text-align: right;
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.9rem;
        }

        .explanation-text {
            line-height: 1.7;
            margin-bottom: 2rem;
        }

        .call-to-action {
            font-weight: 500;
            margin-top: 1rem;
        }

        .action-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin: 2rem 0;
            flex-wrap: wrap;
        }

        .action-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            padding: 1rem 2rem;
            font-size: 1.1rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .action-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }

        /* 3D Rolodex Styling */
        .desk-surface {
            background: linear-gradient(135deg, #3a2f2a 0%, #2d2520 100%);
            border-radius: 20px;
            padding: 3rem 2rem;
            margin: 2rem 0;
            box-shadow:
                0 20px 60px rgba(0, 0, 0, 0.5),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            position: relative;
        }

        .rolodex-3d {
            perspective: 1200px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 400px;
            position: relative;
        }

        .rolodex-base {
            position: relative;
            width: 320px;
            height: 280px;
        }

        /* Metal side spindles */
        .spindle {
            position: absolute;
            width: 80px;
            height: 280px;
            background: linear-gradient(90deg,
                #1a1a1a 0%,
                #3a3a3a 20%,
                #2a2a2a 50%,
                #1a1a1a 100%);
            border-radius: 40px;
            top: 0;
            z-index: 10;
            box-shadow:
                inset -2px 0 4px rgba(0, 0, 0, 0.5),
                2px 0 8px rgba(0, 0, 0, 0.3);
        }

        .spindle.left {
            left: -60px;
        }

        .spindle.right {
            right: -60px;
        }

        /* Horizontal ridges on spindles */
        .spindle::before {
            content: '';
            position: absolute;
            top: 10%;
            left: 10%;
            right: 10%;
            bottom: 10%;
            background: repeating-linear-gradient(
                0deg,
                transparent,
                transparent 8px,
                rgba(0, 0, 0, 0.3) 8px,
                rgba(0, 0, 0, 0.3) 9px
            );
            border-radius: 30px;
        }

        .card-stack {
            position: absolute;
            width: 100%;
            height: 100%;
            transform-style: preserve-3d;
            transition: transform 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        .rolodex-card {
            position: absolute;
            width: 280px;
            height: 160px;
            background: linear-gradient(180deg, #f5f5dc 0%, #ebe7d5 100%);
            border-radius: 8px;
            box-shadow:
                0 2px 8px rgba(0, 0, 0, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.5);
            padding: 1rem;
            left: 50%;
            top: 50%;
            margin-left: -140px;
            margin-top: -80px;
            transform-origin: center bottom;
            transition: transform 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            border: 1px solid rgba(0, 0, 0, 0.1);
        }

        .rolodex-card.flipping {
            animation: flipCard 0.6s ease-in-out;
        }

        @keyframes flipCard {
            0% {
                transform: rotateX(0deg) translateZ(0px);
            }
            50% {
                transform: rotateX(90deg) translateZ(20px);
            }
            100% {
                transform: rotateX(180deg) translateZ(0px);
            }
        }

        .card-content {
            height: 100%;
            display: flex;
            flex-direction: column;
            font-family: 'Courier New', monospace;
            color: #2d2520;
        }

        .card-name {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
            border-bottom: 2px solid #2d2520;
            padding-bottom: 0.5rem;
        }

        .card-title {
            font-size: 0.85rem;
            color: #5a5a5a;
            margin-bottom: 1rem;
        }

        .card-fact {
            font-size: 0.9rem;
            line-height: 1.5;
            flex: 1;
            overflow-y: auto;
        }

        .card-tabs {
            position: absolute;
            right: 0;
            top: -20px;
            width: 80px;
            height: 20px;
            background: linear-gradient(180deg, #e5e1d0 0%, #d5d1c0 100%);
            border-radius: 4px 4px 0 0;
            box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.2);
        }

        .counter {
            text-align: center;
            margin-top: 2rem;
            color: rgba(255, 255, 255, 0.7);
            font-size: 1rem;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 1rem;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: linear-gradient(135deg, #2a2a2a 0%, #1a1a1a 100%);
            border-radius: 16px;
            padding: 2rem;
            max-width: 500px;
            width: 100%;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .modal-header h2 {
            color: white;
            font-size: 1.5rem;
        }

        .close-modal {
            background: none;
            border: none;
            color: rgba(255, 255, 255, 0.7);
            font-size: 2rem;
            cursor: pointer;
            padding: 0;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: color 0.2s;
        }

        .close-modal:hover {
            color: white;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 0.5rem;
            font-size: 0.95rem;
        }

        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 0.75rem;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: white;
            font-size: 1rem;
            transition: all 0.3s;
        }

        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            background: rgba(255, 255, 255, 0.15);
            border-color: rgba(255, 255, 255, 0.4);
        }

        .form-group textarea {
            min-height: 120px;
            resize: vertical;
            font-family: inherit;
        }

        .submit-btn {
            width: 100%;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.15);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            color: white;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s;
        }

        .submit-btn:hover {
            background: rgba(255, 255, 255, 0.25);
            transform: translateY(-2px);
        }

        .search-input {
            width: 100%;
            padding: 0.75rem;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: white;
            font-size: 1rem;
            margin-bottom: 1rem;
        }

        .search-results {
            max-height: 400px;
            overflow-y: auto;
        }

        .search-result-item {
            background: rgba(255, 255, 255, 0.05);
            padding: 1rem;
            margin-bottom: 0.75rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .search-result-item:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .search-result-name {
            color: white;
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .search-result-fact {
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.9rem;
        }

        @media (max-width: 768px) {
            .rolodex-header h1 {
                font-size: 2rem;
            }

            .desk-surface {
                padding: 2rem 1rem;
            }

            .rolodex-base {
                width: 260px;
                height: 240px;
            }

            .rolodex-card {
                width: 240px;
                height: 140px;
                margin-left: -120px;
                margin-top: -70px;
            }

            .spindle {
                width: 60px;
                height: 240px;
            }

            .spindle.left {
                left: -50px;
            }

            .spindle.right {
                right: -50px;
            }

            .action-buttons {
                flex-direction: column;
                align-items: stretch;
            }

            .action-btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="main-container">
        <div class="content-container">
            <div class="rolodex-container">
                <div class="rolodex-header">
                    <h1>The Fun Fact Rolodex</h1>
                </div>

                <div class="quote-section">
                    <p>"Will, she's been dead two years and that's the shit I remember. Wonderful stuff, you know, little things like that. Ah, but, those are the things I miss the most. The little idiosyncrasies that only I knew about. That's what made her my wife. Oh she had the goods on me too, she knew all my little peccadilloes. People call these things imperfections, but they're not. Ah, that's the good stuff."</p>
                    <p class="quote-attribution">- From Good Will Hunting</p>
                </div>

                <div class="explanation-text">
                    <p>Rolodex's were used in the dark days to organize business contacts. I thought it'd be cool to have a virtual Rolodex but instead of tracking business info, track fun facts and idiosyncrasies ("the good stuff") about people.</p>
                    <p class="call-to-action">If you know a specific fun fact about someone, submit them to the rolodex below!</p>
                </div>

                <div class="action-buttons">
                    <button class="action-btn" id="shuffleBtn">Shuffle</button>
                    <button class="action-btn" id="searchBtn">Search</button>
                    <button class="action-btn" id="submitBtn">Submit a fun fact</button>
                </div>

                <div class="desk-surface">
                    <div class="rolodex-3d">
                        <div class="rolodex-base">
                            <div class="spindle left"></div>
                            <div class="spindle right"></div>
                            <div class="card-stack" id="cardStack">
                                <div class="rolodex-card">
                                    <div class="card-tabs"></div>
                                    <div class="card-content">
                                        <div class="card-name" id="cardName">Loading...</div>
                                        <div class="card-title" id="cardTitle">Fun Fact</div>
                                        <div class="card-fact" id="cardFact">Loading fun facts...</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="counter" id="counter">
                    There are currently 0 contacts in my rolodex.
                </div>
            </div>
        </div>

        <!-- Submit Modal -->
        <div class="modal" id="submitModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Submit a Fun Fact</h2>
                    <button class="close-modal" id="closeSubmit">&times;</button>
                </div>
                <form id="submitForm">
                    <div class="form-group">
                        <label for="personName">Person's Name*</label>
                        <input type="text" id="personName" required placeholder="John Doe">
                    </div>
                    <div class="form-group">
                        <label for="funFact">Fun Fact*</label>
                        <textarea id="funFact" required placeholder="Share something interesting, quirky, or memorable about this person..."></textarea>
                    </div>
                    <div class="form-group">
                        <label for="submitterName">Your Name (optional)</label>
                        <input type="text" id="submitterName" placeholder="Anonymous">
                    </div>
                    <button type="submit" class="submit-btn">Submit to Rolodex</button>
                </form>
            </div>
        </div>

        <!-- Search Modal -->
        <div class="modal" id="searchModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Search Rolodex</h2>
                    <button class="close-modal" id="closeSearch">&times;</button>
                </div>
                <input type="text" class="search-input" id="searchInput" placeholder="Search by name...">
                <div class="search-results" id="searchResults">
                    <!-- Results will be populated here -->
                </div>
            </div>
        </div>

        <!-- Navigation Bar -->
        <nav class="navbar">
            <div class="nav-content">
                <div class="site-title">
                    <a href="index.html">
                        <img src="/images/logo.jpg" alt="Rithika's website" class="site-logo">
                    </a>
                    <span class="separator">|</span>
                    <span class="current-page">fun-fact-rolodex</span>
                </div>

                <button class="menu-trigger">
                    <span>menu</span>
                </button>
            </div>

            <div class="menu-popup hidden">
                <a href="about.html">about</a>
                <a href="likes.html">likes</a>
                <a href="portfolio.html">portfolio</a>
                <a href="contact.html">connect</a>
            </div>
        </nav>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script>
        // Supabase Configuration
        const SUPABASE_URL = 'https://pgyyyowlvvyszxyolpgy.supabase.co';
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBneXl5b3dsdnZ5c3p4eW9scGd5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzYyODc1MjQsImV4cCI6MjA1MTg2MzUyNH0.YwOSicEuNiT7bRNtBBiWN5xHWfIKPwk0uj2OMrYaLl8';
        const { createClient } = supabase;
        const supabaseClient = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

        // State
        let allFacts = [];
        let currentIndex = 0;

        // DOM Elements
        const shuffleBtn = document.getElementById('shuffleBtn');
        const searchBtn = document.getElementById('searchBtn');
        const submitBtn = document.getElementById('submitBtn');
        const submitModal = document.getElementById('submitModal');
        const searchModal = document.getElementById('searchModal');
        const closeSubmit = document.getElementById('closeSubmit');
        const closeSearch = document.getElementById('closeSearch');
        const submitForm = document.getElementById('submitForm');
        const searchInput = document.getElementById('searchInput');
        const searchResults = document.getElementById('searchResults');
        const cardName = document.getElementById('cardName');
        const cardFact = document.getElementById('cardFact');
        const counter = document.getElementById('counter');
        const cardStack = document.getElementById('cardStack');

        // Load fun facts from Supabase
        async function loadFunFacts() {
            try {
                const { data, error } = await supabaseClient
                    .from('fun_facts')
                    .select('*')
                    .order('created_at', { ascending: false });

                if (error) throw error;

                allFacts = data || [];
                updateCounter();
                if (allFacts.length > 0) {
                    displayCard(allFacts[0]);
                } else {
                    displayEmptyState();
                }
            } catch (error) {
                console.error('Error loading fun facts:', error);
                displayEmptyState();
            }
        }

        // Display a card
        function displayCard(fact) {
            if (!fact) {
                displayEmptyState();
                return;
            }
            cardName.textContent = fact.person_name;
            cardFact.textContent = fact.fun_fact;
        }

        // Display empty state
        function displayEmptyState() {
            cardName.textContent = 'No entries yet';
            cardFact.textContent = 'Be the first to submit a fun fact!';
        }

        // Update counter
        function updateCounter() {
            counter.textContent = `There are currently ${allFacts.length} contact${allFacts.length !== 1 ? 's' : ''} in my rolodex.`;
        }

        // Shuffle with flip animation
        function shuffleCard() {
            if (allFacts.length === 0) return;

            const card = cardStack.querySelector('.rolodex-card');
            card.classList.add('flipping');

            setTimeout(() => {
                currentIndex = Math.floor(Math.random() * allFacts.length);
                displayCard(allFacts[currentIndex]);
                card.classList.remove('flipping');
            }, 300);
        }

        // Show/hide modals
        function showModal(modal) {
            modal.classList.add('active');
        }

        function hideModal(modal) {
            modal.classList.remove('active');
        }

        // Submit form handler
        submitForm.addEventListener('submit', async (e) => {
            e.preventDefault();

            const personName = document.getElementById('personName').value.trim();
            const funFact = document.getElementById('funFact').value.trim();
            const submitterName = document.getElementById('submitterName').value.trim() || 'Anonymous';

            try {
                const { data, error } = await supabaseClient
                    .from('fun_facts')
                    .insert([{
                        person_name: personName,
                        fun_fact: funFact,
                        submitted_by: submitterName
                    }]);

                if (error) throw error;

                // Reset form and close modal
                submitForm.reset();
                hideModal(submitModal);

                // Reload facts
                await loadFunFacts();

                alert('Fun fact submitted successfully!');
            } catch (error) {
                console.error('Error submitting fun fact:', error);
                alert('Error submitting fun fact. Please try again.');
            }
        });

        // Search functionality
        searchInput.addEventListener('input', (e) => {
            const searchTerm = e.target.value.toLowerCase().trim();

            if (searchTerm === '') {
                searchResults.innerHTML = '<p style="color: rgba(255, 255, 255, 0.5); text-align: center;">Start typing to search...</p>';
                return;
            }

            const results = allFacts.filter(fact =>
                fact.person_name.toLowerCase().includes(searchTerm)
            );

            if (results.length === 0) {
                searchResults.innerHTML = '<p style="color: rgba(255, 255, 255, 0.5); text-align: center;">No results found</p>';
                return;
            }

            searchResults.innerHTML = results.map(fact => `
                <div class="search-result-item" onclick="viewFact(${allFacts.indexOf(fact)})">
                    <div class="search-result-name">${fact.person_name}</div>
                    <div class="search-result-fact">${fact.fun_fact.substring(0, 100)}${fact.fun_fact.length > 100 ? '...' : ''}</div>
                </div>
            `).join('');
        });

        // View specific fact from search
        window.viewFact = function(index) {
            currentIndex = index;
            displayCard(allFacts[index]);
            hideModal(searchModal);
        };

        // Event listeners
        shuffleBtn.addEventListener('click', shuffleCard);
        searchBtn.addEventListener('click', () => {
            searchInput.value = '';
            searchResults.innerHTML = '<p style="color: rgba(255, 255, 255, 0.5); text-align: center;">Start typing to search...</p>';
            showModal(searchModal);
        });
        submitBtn.addEventListener('click', () => showModal(submitModal));
        closeSubmit.addEventListener('click', () => hideModal(submitModal));
        closeSearch.addEventListener('click', () => hideModal(searchModal));

        // Close modals on outside click
        submitModal.addEventListener('click', (e) => {
            if (e.target === submitModal) hideModal(submitModal);
        });
        searchModal.addEventListener('click', (e) => {
            if (e.target === searchModal) hideModal(searchModal);
        });

        // Initialize
        loadFunFacts();
    </script>
    <script type="module" src="/main.js"></script>
</body>
</html>
